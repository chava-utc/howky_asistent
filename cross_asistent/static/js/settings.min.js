function getCSRFToken(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){var a=jQuery.trim(t[e]);if("csrftoken="==a.substring(0,10))return decodeURIComponent(a.substring(10))}const o=$("[name=csrfmiddlewaretoken]").val();return o}function cadenaRandom(t,e){for(var a="",o=0;o<t;o++){var r=Math.floor(Math.random()*e.length);a+=e.charAt(r)}return a}function jsonSubmit(t){t.preventDefault=t.preventDefault||function(){},t.preventDefault();const e=t.target,a=new FormData(e);if(a.has("contenidoWord")){const t=tinymce.activeEditor.getContent();a.set("contenidoWord",t);const e=tinymce.activeEditor.getContent({format:"text"});a.set("textTiny",e)}try{formSubmitBtn=e.querySelector('button[type="submit"]'),formSubmitBtn&&formSubmitBtn.setAttribute("disabled","disabled")}catch(t){console.warn("Advertencia: Boton de envio no encontrado..."),console.warn(formSubmitBtn),console.error(t)}fetch(e.action,{method:"POST",body:a,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":formToken}}).then(async t=>{if(!t.ok){const e=await t.json();throw console.error(e),new Error(e.error||"Error en el formato recivido")}return t.json()}).then(t=>{if(dataMessage=t.message,1==t.success){let o,r=t.icon||"success",n=t.position||"center";function a(){window.location.href=t.redirect_url}switch(t.functions){case"singin":return a();case"reload":o=(()=>location.reload());break;case"redirect":o=a;break;case"reset":o=(()=>e.reset())}setTimeout(()=>e.querySelector('button[type="submit"]').removeAttribute("disabled"),1e4);const i=document.querySelectorAll('input[type="password"]');i.forEach(t=>t.value=""),alertSToast(n,timerOut,r,dataMessage,o)}else 0==t.success&&(console.waning(dataMessage),t.valSelector&&(e.querySelector(`[data-selector-input="${t.valSelector}"]`).classList.add("is-invalid"),e.querySelector(`[data-selector-input="${t.valSelector}"]`).classList.remove("is-valid")),alertSToast("top",timerOut+6e3,"warning",dataMessage,()=>{e.querySelector('button[type="submit"]').removeAttribute("disabled")}));"submit"==t.functions&&e.querySelector('button[type="submit"]').removeAttribute("disabled")}).catch(t=>{console.error("😥 Error inesperado:",t),errorMessage=t.message||"Ocurrió un error. Intente nuevamente. 😥",alertSToast("center",timerOut+8e3,"error",errorMessage,()=>{e.querySelector('button[type="submit"]').removeAttribute("disabled")})})}function convertToDateInputFormat(t){const e=new Date(t),a=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${a}-${o}-${r}`}function alertSToast(t,e,a,o,r){const n=Swal.mixin({toast:!0,position:t,showConfirmButton:!1,showCloseButton:!0,timer:e,timerProgressBar:!0,customClass:{icon:"icon_alert",title:"title_alert",timerProgressBar:"progressbar_alert",closeButton:"close_button_alert"},didOpen:t=>{t.addEventListener("mouseenter",Swal.stopTimer),t.addEventListener("mouseleave",Swal.resumeTimer)},didDestroy:r});n.fire({icon:a,title:o})}var alfabetico="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",alfanumerico="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890123456789",caracteres="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890123456789@$!%*.?&",texto3=/[a-zA-Z0-9]{3}/,formToken=getCSRFToken(),timerOut=5e3,expressions={name:/^[a-zA-ZÀ-ÿ\s]+$/,username:/^(?![0-9_-])[a-zA-Z0-9_-]+$/,email:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,password:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*.?&])[A-Za-z\d@#<>:;$!%*.?&]{8,}$/,title:/^[a-zA-ZÀ-ÿ][a-zA-ZÀ-ÿ0-9\s\-_#]*$/};$(document).ready(function(){try{$("#overlayMenu").click(()=>{$("nav button.navbar-toggler").click()});var t=$("#searchInput");function e(){var e=t.val().toLowerCase();$("#searchInput").text(e);$(".results_item").filter(function(){return $(this).toggle($(this).text().toLowerCase().indexOf(e)>-1),$(this).is(":visible")}).length}t.on("input",e);var a=1/0;let p=null;function o(){$(this).addClass("active");var t=cadenaRandom(10,caracteres),e=$(this).data("editinput");setTimeout(()=>{$(this).removeClass("active")},1e3),$("#"+e).val(`UTC#${t}`).addClass("active")}function r(){var t=$(this).data("reset_form"),e=$("#"+t)[0];e&&(e.reset(),c())}function n(){const t=["#4285F4","#EA4335","#FBBC05","#4285F4","#34A853","#EA4335"],e=$(".style_google"),a=e.text();e.empty();for(let o=0;o<a.length;o++)e.append(`<span style="color:${t[o]}">${a[o]}</span>`)}$('[id^="bannerid_"]').each(function(){var t=$(this).attr("id"),e=parseInt(t.split("_")[1]);e<a&&(a=e,p=$(this))}),null!==p&&p.addClass("active"),$("[data-submit-form]").submit(jsonSubmit),$("[data-submit-form]").is("[data-submit-ready]")&&setTimeout(()=>{$('[data-submit-ready] button[type="submit"]').click()},2e3),$("[data-submit-blur] .input_blur").on("blur",function(){let t=$(this).closest("[data-submit-blur]"),e=t.data("submit-blur");t.find(`button#${e}`).click()}),$("[data-submit-blur] .input_change").on("change",function(){let t=$(this).closest("[data-submit-blur]"),e=t.data("submit-blur");setTimeout(()=>{t.find(`button#${e}`).click()},1e3)}),$("[data-submit-click]").on("click",function(){const t=$(this).data("submit-click");$("#"+t).click().attr("disabled","disabled"),disabledButtons.includes(t)||disabledButtons.push(t),localStorage.setItem("disabledButtons",JSON.stringify(disabledButtons))}),$("button[data-editinput]").click(o),$("[data-btn_closed]").on("click",function(){var t=$(this).data("btn_closed");$(t).toggleClass("show"),t.includes("slide")&&$(t).slideToggle("slow")}),$("[data-remove-item]").on("click",function(){var t=$(this).data("remove-item");setTimeout(()=>{$("#"+t).slideUp("slow"),setTimeout(()=>{$("#"+t).remove()},500)},1e3)}),$("[data-transfer-click]").on("click",function(){const t=$(this).data("transfer-click"),e=$("#"+t);e.click()}),$("[data-reset_form]").on("click",r),n(),$(document).on("keydown",function(t){"Escape"!==t.key&&27!==t.keyCode||Swal.close()});const b=$("input[data-init-clear], textarea[data-init-clear]");b.each(function(){$(this).on("input",function(){let t=$(this).attr("id"),e=$(`[data-clear="${t}"]`);""==$(this).val()?e.hide():e.show()})});const h=$("[data-clear]");h.on("click",function(){const t=$(this).attr("data-clear");$(`#${t}`).val(""),$(this).slideUp("fast")}),$("[data-change-color]").on("click",function(){$("[data-change-color]").each(function(t,e){$(e).removeClass("active")});var t=$(this).addClass("active").data("change-color"),e=$(this).data("rgb");$("html").attr("data-color_prefer",t),localStorage.setItem("data-color_prefer",t),localStorage.setItem("data-color_rgb",e)});const v=localStorage.getItem("data-color_prefer");v?($(`[data-change-color="${v}"]`).addClass("active"),$("html").attr("data-color_prefer",v)):($('[data-change-color="blue"]').addClass("active"),$("html").attr("data-color_prefer","blue"));const y=$("#switchTheme"),k=$("#switchText"),w=$("html"),S=t=>{const e={light:{text:"Claro",dataAttr:"light",lastLayer:"light-v11"},dark:{text:"Oscuro",dataAttr:"dark",lastLayer:"dark-v11"}},a=e[t];k.text(a.text),w.attr("data-mdb-theme",a.dataAttr),localStorage.setItem("data-mdb-theme",a.dataAttr),localStorage.setItem("mapbox-last_layer",a.lastLayer),y.prop("checked","light"===t)};y.on("click",function(){S(y.is(":checked")?"light":"dark")});const A=localStorage.getItem("data-mdb-theme");A&&S(A);const T=$.trim($("#firmaPerfilTexto").text());function i(t,e){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){$(`#${e}`).attr("src",t.target.result)},a.readAsDataURL(t.files[0])}}$("#new_firma").on("input",function(){const t=$(this).val();""===t.trim()?$("#firmaPerfilTexto").text(T):$("#firmaPerfilTexto").text(t)}),$("[data-img_dom]").change(function(){idImgDom=$(this).data("img_dom"),i(this,idImgDom)}),$("[data-input_transparent]").on({focus:function(){$(this).toggleClass("input_transparent")},blur:function(){$(this).toggleClass("input_transparent")}});var s=!1;function l(){s?$("#updatePassBlock").slideUp("fast"):$("#profileSaved").slideUp("fast",function(){$("#updatePassBlock").slideUp("fast")})}function c(){$("[data-range-val]").each((t,e)=>{const a=$(e).attr("data-range-val"),o=$(`${a}`).val();$(e).text(o)})}function d(){const t={},e=window.location.search.substring(1),a=e.split("&");for(let e=0;e<a.length;e++){const o=a[e].split("=");if(2===o.length){const e=decodeURIComponent(o[0]),a=decodeURIComponent(o[1]);t[e]=a}}return t}function u(){const t=d();if(console.log(t),t.hasOwnProperty("tab")){const e=t.tab,a=$(`#${e}`);a.length&&a.click()}}$("#updatePassBtn").on("click",function(){let t=$(this);$("#updatePassText").toggle(),$("#updatePassBtn").hasClass("bg_blue-green")?$("#profileSaved").slideDown("fast",function(){$("#updatePassBlock").slideDown("fast",function(){$("html, body").scrollTop($(document).height())})}):l(),"Cambiar Contraseña"==t.text()?(t.toggleClass("bg_blue-green bg_blue-red"),t.text("No Cambiar Contraseña"),s||$("#passwordSend").val(""),$("#newPass").val(""),$("#confNewPass").val("")):(t.toggleClass("bg_blue-green bg_blue-red"),t.text("Cambiar Contraseña"))}),$("[data-input_change]").each(function(){const t=$(this),e=t.attr("name");var a=t.val();t.on("input",function(){t.val()==a?(t.attr("name",`${e}`),l(),s=!1):(t.attr("name",`${e}Changed`),$("#profileSaved").slideDown("fast"),s=!0,""==t.val()&&t.attr("name",`${e}`))}),t.on("blur",function(){""==t.val()&&(t.attr("name",`${e}`),l(),s=!1)}),t.on("click",function(){e})}),$("input#deletePicture").change(function(){$(this).is(":checked")?($('[for="deletePicture"]').addClass("btn_press"),$("#profileSaved").slideDown("fast"),s=!0):($('[for="deletePicture"]').removeClass("btn_press"),l(),s=!1)}),$("#formularioArticulo #blogNewUpdate").change(function(){blogIdGet=$("#formularioArticulo #blogNewUpdate").val(),dataGetBlog=$("#formularioArticulo #blogNewUpdate").data("get-blog"),"newBlog"!=blogIdGet?$.ajax({url:dataGetBlog,type:"GET",data:{id:blogIdGet},success:function(t){$("#formularioArticulo #imgArticle").attr("src","/static/img/default_image.webp"),t.encabezado&&$("#formularioArticulo #imgArticle").attr("src",t.encabezado),$("#formularioArticulo #titulo").addClass("active").val(t.titulo);const e=t.contenido;tinymce.get("mainTiny").setContent(e),$("#formularioArticulo .blogSubmit").html('Modificar <i class="fa-regular fa-paper-plane ms-1"></i>'),$("#formularioArticulo .btnModal").slideDown("fast"),$("#blogDelete #blogDeleteTitle").text(t.titulo),$("#blogDelete #blogIdDelete").val(blogIdGet)},error:function(t){console.error("Error al obtener datos: "+t),alertSToast("center",8e3,"error","UPS! 😯🤔🧐<br> hubo un error al obtener los datos, consulte la consola.")}}):($("#formularioArticulo #imgArticle").attr("src","/static/img/default_image.webp"),$("#formularioArticulo #titulo").removeClass("active").val(""),tinymce.get("mainTiny").setContent(""),$("#formularioArticulo .blogSubmit").html('Publicar <i class="fa-regular fa-paper-plane ms-1"></i>'),$("#formularioArticulo .btnModal").slideUp("fast"),$("#blogDelete #blogDeleteTitle").text(""),$("#blogDelete #blogIdDelete").val(""))}),$("[data-select_addClass]").change(function(){const t=$(this).val();$(this).attr("class",`form-select change_bg ${t}`)}),$("[data-blur-default]").on("blur",function(){const t=$(this).attr("data-blur-default"),e=$(this).val(),a=$(this).attr(t);""==e&&$(this).val(a),"min"==t&&e<a&&$(this).val(a)}),$('input[type="checkbox"][data-transfer-bool]').on("change",function(){var t=$(this).attr("data-transfer-bool");$(this).is(":checked")?$(t).attr("value","true"):$(t).attr("value","false")}),$('input[type="range"]').on("input",function(){const t=$(this).attr("id"),e=$(this).val();$(`[data-range-val="#${t}"]`).text(e)}),c(),$("[init-wave-click]").on("click",function(t){var e=$('<div class="wave"></div>'),a=$(this).offset(),o=t.pageX-a.left,r=t.pageY-a.top;e.css({width:"50px",height:"50px",top:r-25+"px",left:o-25+"px"}),$(this).append(e),setTimeout(()=>e.remove(),1e3)}),$("[data-valparams]").length&&u();const _=$("#addTags"),C=$("#tags"),x=$("#allTags");function m(t){if(t=t.trim(),!t||f().includes(t))return;const e=f();e.push(t),C.val(e.join(","));const a=t.replace(/[^a-zA-Z0-9_-]/g,"_"),o=$(`\n            <span id="tag-${a}" class="badge badge-primary d-flex justify-content-between align-items-center col">\n                ${t}\n                <button type="button" class="btn-close btn-close-white btn-sm ms-1" aria-label="Close" data-tag="${t}"></button>\n            </span>\n        `);x.append(o),_.val("")}function f(){const t=C.val().trim();return t?t.split(","):[]}function g(t){let e=f().filter(e=>e!==t);C.val(e.join(","));const a=t.replace(/[^a-zA-Z0-9_-]/g,"_");$(`#tag-${a}`).remove()}_.on("keydown",function(t){if("Enter"===t.key||" "===t.key||","===t.key||"."===t.key||";"===t.key||":"===t.key||" "===t.key){t.preventDefault();const e=_.val();m(e)}}),x.on("click",".btn-close",function(){const t=$(this).data("tag");g(t)})}catch(t){console.error("Error Inesperado: ",t),alertSToast("center",8e3,"error","😥 Ah ocurrido un error inesperado. codigo: #304")}});const inputs=document.querySelectorAll("input[data-copy]");inputs.forEach(t=>{const e=()=>{if(!navigator.clipboard)return void alertSToast("center",8e3,"info","Tu navegador no admite copiar al portapapeles 😯😥🤔");const e=t.value;""!=e&&navigator.clipboard.writeText(e).then(()=>{alertSToast("top",5e3,"success","Texto Copiado! 🥳")}).catch(t=>{const e="Error al copiar al portapapeles";console.error(e,":",t),alertSToast("top",8e3,"error",`${e} 🤔😥`)})};t.addEventListener("click",e)});var imagesZoom=document.querySelectorAll(".materialBoxed"),instances=M.Materialbox.init(imagesZoom);const dropArea=document.getElementById("drop-area");if(dropArea){const t=document.getElementById("file-input"),e=document.getElementById("image-list");function formatBytes(t,e=2){if(0===t)return"0 Bytes";const a=1024,o=e<0?0:e,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,n)).toFixed(o))+r[n]}function preventDefaults(t){t.preventDefault(),t.stopPropagation()}function handleDrop(t){let e=t.dataTransfer,a=e.files;handleFiles({target:{files:a}})}function handleFiles(t){let e=t.target.files,a=[],o=1;[...e].forEach(t=>{validateImage(t)&&(a.push(t),previewImage(t,o),++o,console.log(++o))}),a.length>0?alertSToast("top-end",6e3,"success",`${a.length} imágenes cargadas <br>correctamente 😋🤘🥳`):alertSToast("center",6e3,"error","No se admite este tipo de archivo ⚠️😯😥")}function validateImage(t){const e=["image/jpeg","image/png","image/jpg"];return e.includes(t.type)}function previewImage(t,a){const o=new FileReader;o.readAsDataURL(t),o.onloadend=function(){const r=t.name;let n=r.lastIndexOf(".");n=r.substring(n+1);const i=cadenaRandom(5,alfanumerico),s=`<div id="img_${i}" class="image-item"><img src="${o.result}" class="img-rounded unfocus-5"><div class="fs-8"><p class="name-file m-0">${r}</p><p class="size-file m-0">(${n}) ${formatBytes(t.size)}</p></div></div>`;e.insertAdjacentHTML("beforeend",s),setTimeout(()=>{document.querySelector(`#img_${i}`).classList.add("visible"),setTimeout(()=>{document.querySelector(`#img_${i} img`).classList.remove("unfocus-5")},110*a)},90*a)}}["dragenter","dragover","dragleave","drop"].forEach(t=>{dropArea.addEventListener(t,preventDefaults,!1)}),["dragenter","dragover"].forEach(t=>{dropArea.addEventListener(t,()=>dropArea.classList.add("hover"),!1)}),["dragleave","drop"].forEach(t=>{dropArea.addEventListener(t,()=>dropArea.classList.remove("hover"),!1)}),dropArea.addEventListener("drop",handleDrop,!1),dropArea.addEventListener("click",()=>t.click(),!1),t.addEventListener("change",handleFiles,!1)}document.oncontextmenu=function(){return!1};